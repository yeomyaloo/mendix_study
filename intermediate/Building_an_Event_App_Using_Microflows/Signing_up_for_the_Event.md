# 학습목표
이 모듈이 끝나면 다음을 수행할 수 있습니다:
- Mendix Studio Pro에서 익명 사용자 관리하기
- 마이크로플로우에서 작업할 수 있는 변수의 종류와 그 기능 나열하기
- 마이크로플로우 표현식을 만들 때 함수 사용 방법 설명하기
- 익명 사용자가 앱의 일부를 사용할 수 있도록 허용하기
- 마이크로플로우 표현식 사용하기
- 마이크로플로우 디버거 사용하기
- 객체 롤백하기

# 이벤트 등록 활성화
## 1. 시나리오
- 이전 모듈에서 멋진 프로그램을 만들었으니, 이제 이를 세상과 공유할 시간입니다!  
- 모두가 이 이벤트를 위해 준비된 놀라운 프로그램을 볼 수 있는 웹사이트나 앱에 방문할 수 있다면 얼마나 멋질까요?
- 관심이 있는 사람들은 이용 가능한 티켓 중에서 선택하고 계정을 등록하면서 티켓을 구매할 수 있습니다.
  - 이 기능을 익명 사용자를 추가하고 티켓 구매 프로세스를 설정하여 구현할 것입니다.

# 익명 사용자, 변수 및 함수(Anonymous Users, Variables, and Functions)
## 1. 익명 사용자(Anonymous user)
```plaintext
Mendix에서 라이선스 환경을 위해 앱을 만들 때, 실행하기 전에 보안 설정을 프로덕션 모드로 전환해야 합니다.
이로 인해 사용자는 로그인 페이지 이외의 내용을 보려면 앱에 로그인해야 합니다.

하지만 온라인 상점처럼 로그인할 필요 없는 콘텐츠를 어떻게 보여줄 수 있을까요? 이를 위해 Mendix는 익명 사용자를 제공합니다.
익명 사용자를 통해 로그인하지 않은 사용자에게 페이지를 표시하고 접근 권한을 부여할 수 있습니다.
상품을 보여주는 것뿐만 아니라 비밀번호 재설정이나 뉴스레터 구독과 같은 유용한 프로세스도 고려해야 합니다.

익명 사용자를 활성화하는 설정은 Mendix Studio Pro의 앱 보안에서 익명 사용자 탭 아래에서 찾을 수 있습니다.
여기에서 익명 사용자를 나타내는 사용자 역할도 선택할 수 있습니다.
이 방식으로 로그인할 수 있는 사용자 역할과 동일하게 보안을 구성할 수 있습니다.

익명 사용자를 활성화한 후에는 익명 사용자 역할을 위한 역할 기반 홈페이지를 추가해야 합니다.
이로 인해 지정된 URL로 가는 모든 사용자의 랜딩 페이지가 로그인 페이지에서 설계된 익명 페이지로 변경됩니다.
익명 사용자 역할은 앱의 다른 사용자 역할과 동일하게 구성할 수 있지만, 앱을 방문하는 모든 사용자에게 자동으로 할당되므로 이 역할의 보안 구성에 특별히 주의해야 합니다. 익명 사용자와 관련 없는 엔터티나 프로세스에 접근할 수 있도록 해서는 안 됩니다.
```

## 2. 변수(Variables)
Mendix에서 마이크로플로우를 만들 때, 많은 경우 변수를 사용하게 됩니다. 변수는 단일 객체, 객체 목록 또는 기본(단일) 값으로 존재할 수 있습니다.

### 2.1 변수의 종류
마이크로플로우 내에서 작업할 수 있는 데이터 유형은 다음과 같습니다:
- **객체**: 도메인 모델의 엔터티에 의해 정의된 엔터티의 단일 인스턴스
  - 생성, 변경, 삭제
  - 목적 – 데이터 저장
- **객체 목록**: 특정 엔터티의 객체 목록
  - 생성, 변경(설정, 추가)
  - 목록 함수
    - 목록 집계(합계, 평균, 개수, 최소, 최대)
    - 목록 연산(합집합, 교집합, 차집합, 포함, 동등, 정렬, 필터, 찾기, 머리, 꼬리)
  - 목적 – 객체 목록으로 작업 수행
- **기본 변수**: 다양한 값 유형을 가질 수 있음: Boolean, 날짜 및 시간, 십진수, 열거형, 정수/롱, 문자열
  - 목적 – 마이크로플로우 로직 내에서 값의 임시 저장(예: 값 추적 또는 목록을 반복한 횟수 세기)

| Variable Type         | Definition                                                                 | Operations                          | Purpose                                                           | List Functions                                                       |
|-----------------------|---------------------------------------------------------------------------|-------------------------------------|-------------------------------------------------------------------|---------------------------------------------------------------------|
| **Object**            | A single instance of an entity, defined by an entity in the domain model | Create, change, delete             | Store data                                                        |                                                                     |
| **List of Objects**   | A list of the objects of a specific entity                               | Create, change (set, add)         | Do something with the list of objects                             | Aggregate a list: sum, average, count, minimum, maximum           |
|                       |                                                                           |                                     |                                                                   | List operations: union, intersect, subtract, contains, equals, sort, filter, find, head, tail |
| **Primitive Variables**| Can be of different value types: Boolean, date and time, decimal, enumeration, integer/long, string |                                     | Temporary storage of values for use within microflow logic (e.g., for keeping track of a value or counting the times you’ve iterated over a list) |                                                                     |
### 2.2 변수 표현 방법
- 마이크로플로우 내에서 변수는 달러 기호(`$`)로 표시되며, 변수 이름이 뒤따릅니다.
- 변수는 입력 매개변수로 또는 검색 활동을 통해 검색하여 마이크로플로우에 삽입할 수 있습니다.
  - 변수는 마이크로플로우의 출력 값(반환 값)으로도 사용될 수 있습니다.

## 3. 토큰
- 토큰은 특별한 유형의 변수입니다.
- 토큰은 마이크로플로우에서 사용할 수 있는 시스템 생성 값으로, 예를 들어 결정 또는 XPath 제약 조건에서 사용됩니다.

### 3.1 토큰의 특징
- 여러 가지 토큰이 있으며, 대부분은 날짜 및 시간과 관련이 있습니다. 이러한 날짜 및 시간 토큰은 정확히 지정된 순간을 포함합니다. 시간대와 UTC의 시간 차이에 주의해야 합니다(날짜 및 시간 관련 정보는 Mendix 참조 가이드의 날짜 및 시간 처리 FAQ를 참조하세요).
- 날짜 및 시간과 관련이 없는 토큰으로는 현재 사용자 토큰, 현재 객체 토큰 및 사용자 역할 토큰이 있습니다. 현재 사용자에는 현재 사용자 객체의 ID가 포함됩니다. 예를 들어, 현재 순간(밀리초 단위로 정확함)은 ‘[%CurrentDateTime%]’를 사용하여 식별할 수 있으며, 현재 사용자 ID는 ‘[%CurrentUser%]’를 사용하여 접근할 수 있습니다.

## 4. 마이크로플로우 표현식 및 함수
- 마이크로플로우 표현식은 비즈니스 프로세스 내에서 로직을 정의하는 데 도움을 줍니다.
- 마이크로플로우 표현식은 마이크로플로우 및 규칙에서 사용할 수 있습니다.
### 4.1 마이크로플로우 표현식 종류
표현식을 사용할 수 있는 다양한 영역의 예는 다음과 같습니다:
- 조건 분기
- 객체 생성 및 변경 작업
- 변수 생성 및 변경
- 종료 이벤트의 출력
- 매개변수의 인수(Java 작업, 서브 마이크로플로우 호출 등)

이러한 표현식 내에서 객체나 변수를 접근, 평가, 형식화 및 조작하는 데 사용할 수 있습니다.

## 5. 구성 요소
표현식은 여러 가지 다른 유형의 구성 요소로 구성됩니다. 작업할 수 있는 변수의 다양한 유형은 객체, 속성 및 연관관계입니다.
- **객체 (평가)**: 
  - `$Customer != empty`
  
- **속성 (값 설정)**: 
  - `$Customer/Address`
  
- **연관관계 (평가)**: 
  - `$Customer/OrderManagement.Customer_ProfileImage != empty`

### 함수
마이크로플로우 표현식을 만들 때 사용할 수 있는 많은 미리 정의된 함수(f(x))가 있습니다. 아래는 몇 가지 예입니다.
- **산술 표현식**: `* div + -`
- **관계 표현식**: `< > = !=`
- **특별 체크**: `empty, isNew`
- **불리언 표현식**: `and, or, not`
- **차별화**: `if, then, else`
- **수학**: `max, min, round` 등
- **문자열**: `toUpperCase, find, substring` 등
- **날짜/시간**: `dateTime, addDays` 등
- **파싱/형식화**: `parseFloat, formatDateTime` 등

사용 가능한 표현식과 함수에 대한 개요 및 사용 방법에 대한 세부정보는 Mendix 참조 가이드의 마이크로플로우 표현식에서 확인하세요.

### 함수 결합
많은 경우 원하는 결과를 얻기 위해 여러 함수를 결합해야 합니다. 이 경우 계산의 우선순위를 결정하기 위해 괄호를 사용할 수 있습니다.

첫 번째 예에서는 기본 가격 및 할인 속성을 기반으로 판매 가격을 계산합니다 (OCH_SetLineValue 마이크로플로우에서):


