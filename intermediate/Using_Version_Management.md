# Using Version Management
## 목표
- 버전 관리 저장소에 앱을 업로드하기
- 앱의 기록에 접근하고 지금까지 적용된 모든 변경 사항 확인하기
- 앱 기록에서 찾을 수 있는 다양한 이벤트 유형 설명하기
- 로컬 데이터를 팀원들과 공유하기
- 앱 충돌 해결하기
- 이전 앱 수정본 열기
- 충돌 상황 방지하기
- 브랜치 작업하기
- 자체 버전 관리 서버 사용하기

## 버전 관리 저장소에 앱 업로드하기 
![image](https://github.com/user-attachments/assets/25063d69-68df-41af-9764-a7d954a8a1b9) </br>
Mendix에서 새로운 앱을 시작할 때, 시스템은 자동으로 앱을 위한 저장소를 생성할 것을 제안합니다. 아직 버전 관리되지 않은 앱은 언제든지 버전 관리된 저장소에 연결할 수 있습니다. 다른 앱을 재사용하거나 기존 앱의 복사본을 만들 때 이러한 상황이 발생할 수 있습니다. 이 경우 Mendix는 "버전 관리 서버에 업로드" 옵션을 제공하며, 이는 버전 관리 메뉴에서 찾을 수 있습니다.

## 히스토리
앱의 히스토리를 통해 지금까지 앱에 적용된 변경 사항을 확인할 수 있습니다. 이러한 변경 사항을 바탕으로, 새로 추가된 기능을 되돌려야 할 경우 되돌릴 시점을 선택할 수 있습니다.

`Mendix Portal` 또는 `Studio Pro` 내에서 히스토리를 확인할 수 있습니다.

### 1. Mendix Portal에서 History 확인하기
Mendix Portal에서는 앱 페이지에서 일반 > 팀 서버로 이동하면 다음과 같은 네 가지 유형의 이벤트를 볼 수 있습니다:

- 커밋(Commits)
- 생성된 태그(Created tags)
- 생성된 브랜치 라인(Created branch lines)
- 삭제된 브랜치 라인(Deleted branch lines)
참고: 태그가 지정된 버전은 Mendix 배포 패키지를 빌드하는 데 사용된 수정본입니다.

#### 각 항목별로 다음 정보를 확인할 수 있습니다:
- 설명 메시지
- 이벤트가 발생한 날짜 및 시간
- 이벤트를 트리거한 담당자 이름
- 사용된 Studio Pro 버전 (태그 이벤트의 경우 Mendix Studio Pro 버전을 표시하지 않음)
- 관련된 사용자 스토리
Mendix Studio Pro 내에서는 **버전 관리 > 히스토리...**로 이동하면 다음 두 가지 유형의 이벤트를 확인할 수 있습니다:

커밋(Commits)
생성된 브랜치 라인(Created branch lines)

#### 각 항목별로 다음 정보를 확인할 수 있습니다:
- 리비전 번호
- 변경 유형을 나타내는 기호
- 이벤트 작성자
- 이벤트 발생 날짜
- 이벤트 발생 시간
- 이벤트 메시지
- 관련된 사용자 스토리
- 모델의 변경 사항
- 디스크(저장소)의 변경 사항
이 두 가지 히스토리 보기에는 약간의 차이가 있습니다. 이는 같은 이벤트를 다른 관점에서 보기 때문입니다.

## 스냅샷 포함
Mendix는 로컬 배포를 위해 사용할 수 있는 **자체 기본 데이터베이스를 제공**합니다. 이를 통해 외부 데이터베이스에 의존하지 않고, 이 내장된 데이터베이스를 사용하여 로컬에서 테스트하고 실행할 수 있습니다. 많은 사람들이 모르는 사실은, 이 **데이터베이스를 팀과 공유할 수 있다는 점**입니다. 이를 통해 팀원들도 동일한 데이터셋을 사용하여 앱을 테스트할 수 있으며, 이는 시간을 절약하고 발생한 문제를 재현하는 데 도움이 됩니다.

`Mendix Studio Pro`에서 데이터를 스냅샷으로 저장하려면 버전 관리 메뉴로 이동합니다: 버전 관리 > 데이터 스냅샷 추가.

이 작업은 데이터의 스냅샷을 생성하고 data-snapshot.zip 파일을 앱의 배포 디렉토리에 추가합니다. 다음 번에 커밋할 때, 팀원들은 이 파일을 지정된 배포 폴더에 압축 해제하여 해당 데이터베이스를 사용할 수 있습니다. </br>
![image](https://github.com/user-attachments/assets/489e73d5-64fe-491b-b5dd-35a7ad5d3049)

## 충돌을 해결하는 방법
팀과 함께 앱을 개발하다 보면 여러 가지 충돌이 발생할 수 있으며, 이러한 충돌은 새로 커밋하기 전에 반드시 해결해야 합니다. 충돌은 앱 모델의 문서(예: 페이지, 마이크로플로우)와 관련되거나 저장소의 다른 문서와 관련될 수 있습니다. 이 섹션에서는 충돌의 종류와 해결 방법을 알아보겠습니다.

### 1. 충돌의 종류
Mendix에서 주로 발생하는 충돌은 크게 두 가지입니다:

#### 1.1 수정-수정 충돌 (Modify-Modify Conflict)
정의: 같은 문서를 팀원이 동시에 수정할 때 발생합니다.
예시:
페이지의 입력 필드 레이블을 두 사람이 모두 변경하려 할 때
마이크로플로우의 특정 활동을 서로 다르게 수정할 때
도메인 모델에서 동일한 모듈 역할의 엔터티 액세스 규칙을 변경할 때
#### 1.2 수정-삭제 충돌 (Modify-Delete Conflict)
정의: 한 사람이 문서를 수정하는 동안 다른 사람이 그 문서를 삭제했을 때 발생합니다.
예시:
팀원이 DataGrid의 열을 삭제한 상태에서 내가 해당 열을 수정하려 할 때
누군가 마이크로플로우를 삭제했는데 내가 이를 수정하려 할 때
삭제된 연관 관계를 내가 이름 변경하려고 할 때
#### 1.3 기타 충돌
동일한 이름의 문서를 추가: 예를 들어, 동일한 이름의 페이지나 마이크로플로우를 여러 명이 동시에 추가할 때 발생
동일한 Marketplace 모듈을 가져오는 경우: 이미 가져온 모듈을 다시 가져오면 충돌이 발생할 수 있습니다.

### 2. 충돌 해결 방법
Mendix에서는 충돌을 해결하기 위해 다음 단계를 따를 수 있습니다.

#### 2.1 차이점 확인
로컬 작업 복사본과 온라인 버전 간의 차이점을 먼저 확인해야 합니다. 이를 위해 변경 사항 창에서 내가 수정한 부분을 확인할 수 있으며, 업데이트 후에는 팀원이 수정한 부분도 다운로드됩니다.
#### 2.2 팀원과 소통
충돌이 발생한 문서를 수정한 팀원과 협력하여 어떤 버전을 사용할지 결정하는 것이 중요합니다. 소통을 통해 충돌을 빠르게 해결할 수 있습니다.
#### 2.3 충돌 해결
Mendix Studio Pro에서 충돌을 해결하려면 다음 방법을 사용할 수 있습니다:
'그들의 버전으로 해결': 상대방의 버전을 선택하면 해당 문서가 내 문서를 대체합니다.
내 문서의 복사본을 만들고 두 버전을 비교한 후 최종 결정을 내리는 것도 가능합니다. 예를 들어, 마이크로플로우의 경우 내 문서를 복사한 뒤 상대방의 버전을 선택해 둘 다 비교할 수 있습니다.

### 3. 충돌 예방 방법
충돌을 예방하려면 다음과 같은 전략을 사용할 수 있습니다:

정기적인 업데이트와 커밋: 자주 업데이트하고 커밋하는 습관을 통해 팀 간의 작업 충돌을 최소화할 수 있습니다.
작업 분리: 팀원 간의 작업 영역을 명확히 구분하여 동일한 문서를 동시에 수정하는 상황을 방지할 수 있습니다.
도메인 모델 합의: 도메인 모델의 기초는 스프린트마다 팀원들과 합의하여 변경사항이 한쪽에서 일방적으로 이루어지지 않도록 합니다.
이러한 절차를 통해 충돌을 관리하고 원활하게 협업할 수 있습니다.
